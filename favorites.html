<!DOCTYPE html>
<html lang="ru">
<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Queen_Anasteisha — Fashion Boutique</title>
  <style>
    :root {
      --bg:#0b0c12; --card:#141725; --soft:#1c2133; --text:#f7f7fb; --muted:#a7acc2;
      --accent:#e13f7b; --accent-2:#5ec6ff; --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:0 16px;}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(11,12,18,.92),rgba(11,12,18,.4));backdrop-filter: blur(8px);}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0;}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800}
    .brand-badge{width:36px;height:36px;border-radius:10px;background:linear-gradient(145deg,var(--accent),#ff7ea7);box-shadow:0 8px 18px rgba(0,0,0,.35);}
    .cta{display:flex;gap:10px;align-items:center}
    .cta a{padding:10px 14px;border-radius:12px;background:var(--soft);color:var(--text);font-weight:600;border:1px solid rgba(255,255,255,.06)}
    .cta a.primary{background:linear-gradient(135deg,var(--accent),#ff7ea7);}
    .cta svg{display:block}

    .hero{position:relative;min-height:56vh;border-bottom-left-radius:40px;border-bottom-right-radius:40px;overflow:hidden;background:#0b0c12;}
    .hero::before{
      content:"";position:absolute;inset:0;background:url('assets/dubai_hero.png') center/cover no-repeat fixed;opacity:.9;
    }
    .hero-overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(11,12,18,.0) 0%, rgba(11,12,18,.75) 70%, rgba(11,12,18,.95) 100%);}
    .hero-inner{position:relative;z-index:1;padding:80px 0 40px;display:flex;align-items:flex-end;min-height:56vh;}
    .hero-card{background:linear-gradient(145deg,rgba(28,33,51,.85),rgba(20,23,37,.85));backdrop-filter: blur(6px);border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);border-radius:22px;padding:22px;max-width:760px;margin-bottom:10px;}
    .hero-title{font-size:34px;margin:0 0 6px;font-weight:900;}
    .hero-sub{margin:0;color:var(--muted)}
    .chips{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    .chip{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .chip.accent{background:linear-gradient(135deg,var(--accent),#ff7ea7);}
    .chip.blue{background:linear-gradient(135deg,var(--accent-2),#98deff);color:#071018}

    .filters{margin:26px 0 10px;display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;align-items:center}
    .filter-tabs{display:flex;gap:10px;flex-wrap:wrap}
    .tab{padding:10px 14px;border-radius:12px;background:var(--soft);cursor:pointer;border:1px solid rgba(255,255,255,.06)}
    .tab.active{background:linear-gradient(135deg,var(--accent-2),#98deff);color:#071018;font-weight:800}
    .search{display:flex;align-items:center;background:var(--soft);border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:8px 12px;gap:8px;min-width:240px;flex:1;max-width:320px;}
    .search input{background:transparent;border:none;outline:none;color:var(--text);width:100%}

    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px;margin:10px 0 60px;}
    .card{grid-column:span 12;background:#141725;border-radius:18px;overflow:hidden;border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);}
    @media(min-width:640px){.card{grid-column: span 6;}}
    @media(min-width:1024px){.card{grid-column: span 4;}}
    .carousel{position:relative;aspect-ratio:3/4;overflow:hidden;background:#0f1220}
    .slides{display:flex;height:100%;transition:transform .5s ease}
    .slides img{width:100%;object-fit:cover;display:block;flex:0 0 100%}
    .dots{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:6px;z-index:2}
    .dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,.5);cursor:pointer;border:1px solid rgba(255,255,255,.7)}
    .dot.active{background:#fff}
    .arrow{position:absolute;top:50%;transform:translateY(-50%);width:36px;height:36px;border-radius:999px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.2);display:grid;place-items:center;color:#fff;cursor:pointer;z-index:2}
    .arrow.left{left:10px} .arrow.right{right:10px}
    .meta{display:flex;flex-direction:column;gap:10px;padding:14px 14px 16px;}
    .title{font-size:18px;font-weight:800;margin:0}
    .price-size{display:flex;justify-content:space-between;align-items:center;color:#a7acc2}
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .buy{margin-top:6px;display:flex;gap:10px}
    .btn{flex:1;padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:800}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#ff7ea7);color:#fff}
    .btn.ghost{background:#1c2133;color:#fff;border:1px solid rgba(255,255,255,.08)}
    footer{padding:40px 0;border-top:1px dashed rgba(255,255,255,.15);color:#a7acc2}
    .footgrid{display:grid;grid-template-columns:1fr;gap:18px}
    @media(min-width:720px){.footgrid{grid-template-columns:1.2fr 1fr 1fr;}}
    .footbrand{display:flex;align-items:center;gap:12px}
    .footbrand .brand-badge{width:42px;height:42px}
    .tiny{font-size:12px;color:#a7acc2}
  
    /* === Match 'Платья' sizing for all categories (incl. 'Пиджаки') === */
    .card{display:flex;flex-direction:column;height:100%}
    .carousel{position:relative;aspect-ratio:3/4;overflow:hidden;background:#0f1220}
    .slides{display:flex;height:100%;transition:transform .5s ease}
    .slides img{width:100%;height:100%;object-fit:cover;display:block;flex:0 0 100%}
    .carousel>img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{flex:1;display:flex;flex-direction:column}
    .buy{margin-top:auto}

  </style>

<title>Избранное</title>
<style>
/* Minor overrides for the favourites page */
.hero h1 { margin-bottom: 4px; }
.hero-sub { opacity:.8 }
.empty-note {opacity:.7; padding:24px 0}
</style>
</head>
<body>
  <section class="hero">
    <div class="hero-content">
      <h1>Избранное</h1>
      <p class="hero-sub">Ваши сохранённые товары</p>
      <div style="margin-top:12px">
        <a class="btn" href="index.html">← Вернуться в каталог</a>
      </div>
    </div>
  </section>

  <main class="wrap" id="catalog">
    <section class="grid" id="grid"></section>
    <nav class="pager" id="pager"></nav>
  </main>

  <footer>
    <p class="tiny">© Избранное · Бутик женской одежды</p>
  </footer>

  <script>
  (function(){
    const STORAGE_KEY = 'favs_v1';

    function getFavs(){ try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); } catch(e){ return []; } }

    // Load index.html, parse and pull only cards with data-title in favs
    async function loadFavourites(){
      const favs = getFavs();
      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      if (!favs.length) { 
        grid.innerHTML = '<p class="empty-note">Пока пусто. Добавляйте лоты в избранное на главной странице.</p>';
        return;
      }

      try { 
        const res = await fetch('index.html', { cache: 'no-store' });
        const text = await res.text();
        const doc = new DOMParser().parseFromString(text, 'text/html');
        const cards = Array.from(doc.querySelectorAll('.card'));
        const map = new Map(cards.map(c => [ (c.getAttribute('data-title') || c.querySelector('.title')?.textContent?.trim()), c ]));
        favs.forEach(title => {
          const c = map.get(title);
          if (c) grid.appendChild(c.cloneNode(true));
        });
      } catch (e) {
        grid.innerHTML = '<p class="empty-note">Не удалось загрузить избранное. Откройте главную страницу и попробуйте снова.</p>';
      }

      // make "В избранное" buttons work here too
      initFavButtons();
    }

    function initFavButtons(){
      document.querySelectorAll('.card').forEach(card => { 
        const title = card.getAttribute('data-title') || card.querySelector('.title')?.textContent?.trim();
        const btn = card.querySelector('.btn.ghost');
        if (!btn || !title) return;
        const favs = getFavs();
        if (favs.includes(title)) { card.classList.add('fav'); btn.textContent = 'В избранном'; btn.setAttribute('aria-pressed','true'); }
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          let list = getFavs();
          const idx = list.indexOf(title);
          if (idx >= 0) list.splice(idx,1); else list.push(title);
          localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
          loadFavourites();
        });
      });
    }

    window.addEventListener('DOMContentLoaded', loadFavourites);
  })();
  </script>
</body>
</html>
